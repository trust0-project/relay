{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import debug from 'debug'\nimport { buildConfig, createNode } from '@trust0/node'\n// Enable debug for libp2p and relay components\ndebug.enable('libp2p:*,relay:*')\n\nconst log = debug('relay:server')\nconst SK = process.env.PRIVATE_KEY || \"f6335f09116b362a779d964edd431d3bb6e227aafde36653fb20836331e569e53142bebd812054496050646872c6a33d7ecc008f02eaddfc7a3d04cc13739a1d\";\nconst PORT = parseInt(process.env.PORT || '5050');\n\nconst announceAddress = process.env.ANNOUNCE_ADDRESS ||\n  `/ip4/127.0.0.1/tcp/${PORT}/ws/p2p/12D3KooWD8fB9GHxMgV7gHg2op9chXcn8M5Tg4zqiVYb6bSKj8DS`;\n\n(async () => {\n\n  const config = buildConfig({\n    type: 'relay',\n    addresses: {\n      listen: [\n        `/ip4/0.0.0.0/tcp/${PORT}/ws`,\n        `/p2p-circuit`,\n        `/webrtc`\n      ],\n      announce: [\n        announceAddress\n      ]\n    },\n    sk:SK\n  })\n\n  const relayNode = await createNode(config);\n  log('RELAY node created successfully with config', config)\n  const multiAddresses = relayNode.libp2p.getMultiaddrs();\n  multiAddresses.forEach(ma => {\n    console.log('RELAY listening on', ma.toString())\n  })\n  relayNode.libp2p.addEventListener(\"peer:discovery\", async (event) => {\n    console.log('Peer discovered:', event.detail.id.toString(), \"with multiaddr\", event.detail.multiaddrs)\n  })\n  \n})()"],"names":[],"mappings":";;;AAEA;AACA,KAAK,CAAC,MAAM,CAAC,kBAAkB,CAAC;AAEhC,MAAM,GAAG,GAAG,KAAK,CAAC,cAAc,CAAC;AACjC,MAAM,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,kIAAkI;AACxK,MAAM,IAAI,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,MAAM,CAAC;AAEjD,MAAM,eAAe,GAAG,OAAO,CAAC,GAAG,CAAC,gBAAgB;IAClD,CAAsB,mBAAA,EAAA,IAAI,8DAA8D;AAE1F,CAAC,YAAW;IAEV,MAAM,MAAM,GAAG,WAAW,CAAC;AACzB,QAAA,IAAI,EAAE,OAAO;AACb,QAAA,SAAS,EAAE;AACT,YAAA,MAAM,EAAE;AACN,gBAAA,CAAA,iBAAA,EAAoB,IAAI,CAAK,GAAA,CAAA;gBAC7B,CAAc,YAAA,CAAA;gBACd,CAAS,OAAA;AACV,aAAA;AACD,YAAA,QAAQ,EAAE;gBACR;AACD;AACF,SAAA;AACD,QAAA,EAAE,EAAC;AACJ,KAAA,CAAC;AAEF,IAAA,MAAM,SAAS,GAAG,MAAM,UAAU,CAAC,MAAM,CAAC;AAC1C,IAAA,GAAG,CAAC,6CAA6C,EAAE,MAAM,CAAC;IAC1D,MAAM,cAAc,GAAG,SAAS,CAAC,MAAM,CAAC,aAAa,EAAE;AACvD,IAAA,cAAc,CAAC,OAAO,CAAC,EAAE,IAAG;QAC1B,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,EAAE,CAAC,QAAQ,EAAE,CAAC;AAClD,KAAC,CAAC;IACF,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,OAAO,KAAK,KAAI;QAClE,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,EAAE,gBAAgB,EAAE,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC;AACxG,KAAC,CAAC;AAEJ,CAAC,GAAG"}